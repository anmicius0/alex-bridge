---
import { type CollectionEntry, render } from 'astro:content';
import { getAllHolidays } from '../../features/holidays/services/holidays';
import ContentLayout from '../../layouts/ContentLayout.astro';

export async function getStaticPaths() {
  const holidays = await getAllHolidays();
  return holidays.map((holiday) => ({
    params: { slug: holiday.id },
    props: { holiday },
  }));
}

type Props = { holiday: CollectionEntry<'holiday'> };
const { holiday } = Astro.props;
const { Content } = await render(holiday);

const description = holiday.data.description || holiday.data.title;
const ogImage = holiday.data.image;
---

<ContentLayout entry={holiday} description={description} ogImage={ogImage}>
  <Content />
</ContentLayout>
