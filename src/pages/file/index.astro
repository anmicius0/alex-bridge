---
import Button from '../../components/ui/Button.astro';
import Card from '../../components/ui/Card.astro';
import { getSortedFiles } from '../../features/file/services/files';
import ListLayout from '../../layouts/ListLayout.astro';

const fileDocuments = await getSortedFiles();
---

<ListLayout
  pageTitle="Unterlagen - Bridge mit Alexander"
  title="Unterlagen"
  intro="Laden Sie Ihre Bridge-Materialien und Dokumente herunter."
  maxWidth="max-w-4xl"
  isEmpty={fileDocuments.length === 0}
>
  {
    fileDocuments.map((doc) => (
      <Card title={doc.data.title} class="md:p-8">
        {doc.data.attachments && doc.data.attachments.length > 0 && (
          <div class="flex flex-wrap gap-3">
            {doc.data.attachments.map((file: string) => {
              const fileName = file.split('/').pop() || file;
              return (
                <Button
                  text={fileName}
                  download={true}
                  href={file}
                  target="_blank"
                  icon="ðŸ“„"
                />
              );
            })}
          </div>
        )}
      </Card>
    ))
  }
</ListLayout>
